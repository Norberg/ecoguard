# Api documenation
https://integration.ecoguard.se/
https://ecoguard.se/support/nedladdning/ (Curves integration REST-API)



# Install dependencies
sudo apt-get install python3-psycopg2


# Setup postgress database

# Create User
sudo -u postgres psql -c "CREATE USER ecoguard WITH PASSWORD 'ecoguard';"

# Create Database
sudo -u postgres psql -c "CREATE DATABASE ecoguard;"

# Grant Privileges
sudo -u postgres psql -c "GRANT ALL PRIVILEGES ON DATABASE ecoguard TO ecoguard;"

# Grant Schema Privileges
sudo -u postgres psql -c "GRANT ALL PRIVILEGES ON SCHEMA public TO ecoguard;" -d ecoguard

# Create Table

psql -h localhost -U ecoguard -d ecoguard -c  "
CREATE TABLE node_data (
    id SERIAL PRIMARY KEY,
    node_id INT,
    node_name VARCHAR(255),
    func VARCHAR(50),
    unit VARCHAR(50),
    utl VARCHAR(50),
    timestamp TIMESTAMP WITHOUT TIME ZONE,
    value FLOAT
);

-- Create Unique Constraint
ALTER TABLE node_data
    ADD CONSTRAINT idx_unique_node_data UNIQUE (node_id, node_name, func, unit, utl, timestamp);
"